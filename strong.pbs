#!/bin/sh -l

#PBS -l nodes=1:ppn=24
#PBS -l walltime=0:30:00
#PBS -N shallow
#PBS -j oe

module load cs5220
cd $PBS_O_WORKDIR

nthreads=1
ncells=100

echo "strong scaling"
echo "number of threads: $nthreads"
echo "number of cells: $ncells"

export OMP_NUM_THREADS=$nthreads

amplxe-cl -collect advanced-hotspots \
./shallow -i dam_break -o dam_break.out -n $ncells


